<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Lock Picker: Global Heist</title>
    <meta name="description" content="A noble thief's puzzle adventure">
    <meta name="theme-color" content="#d4a337">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Source+Code+Pro:wght@400;600;700&family=Cinzel:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="game-container">
        <!-- Title Screen -->
        <div id="screen-title" class="screen active">
            <div class="title-logo">
                <h1>LOCK PICKER</h1>
                <h2>Global Heist</h2>
            </div>
            <div class="title-subtitle">A Noble Thief's Journey</div>
            <button id="btn-new-game" class="btn btn-primary">New Game</button>
            <button id="btn-continue" class="btn btn-secondary" style="display:none;">Continue</button>
            <div class="title-footer">Portrait Mode Recommended</div>
        </div>

        <!-- Briefing Screen -->
        <div id="screen-briefing" class="screen">
            <div class="briefing-portrait" id="briefing-portrait"></div>
            <div class="briefing-name" id="briefing-name"></div>
            <div class="briefing-box">
                <div class="briefing-text" id="briefing-text"></div>
                <div class="briefing-cursor" id="briefing-cursor">|</div>
            </div>
            <div class="briefing-buttons">
                <button id="btn-briefing-next" class="btn btn-small">Next</button>
                <button id="btn-briefing-skip" class="btn btn-skip">Skip</button>
            </div>
        </div>

        <!-- Map Screen -->
        <div id="screen-map" class="screen">
            <div class="map-header">
                <div class="map-city" id="map-city">LONDON</div>
                <div class="map-money" id="map-money">$0</div>
            </div>
            <div class="map-area" id="map-area">
                <!-- Buildings rendered by JS -->
            </div>
            <div class="map-toolbar">
                <button id="btn-shop" class="btn btn-small">Shop</button>
                <button id="btn-stats" class="btn btn-small">Stats</button>
                <button id="btn-settings" class="btn btn-small">Settings</button>
            </div>
        </div>

        <!-- Heist Screen -->
        <div id="screen-heist" class="screen">
            <div class="heist-header">
                <div class="heist-location" id="heist-location"></div>
                <div class="heist-layers" id="heist-layers"></div>
            </div>
            <div class="heist-puzzle-area" id="heist-puzzle-area">
                <!-- Active puzzle canvas -->
                <canvas id="puzzle-canvas"></canvas>
            </div>
            <div class="heist-tools" id="heist-tools">
                <!-- Tool buttons rendered by JS -->
            </div>
            <div class="heist-hint">
                <button id="btn-hint" class="btn btn-small">Hint</button>
            </div>
        </div>

        <!-- Reward Screen -->
        <div id="screen-reward" class="screen">
            <div class="reward-title" id="reward-title">SAFE OPENED!</div>
            <div class="reward-safe" id="reward-safe"></div>
            <div class="reward-loot" id="reward-loot"></div>
            <div class="reward-value" id="reward-value"></div>
            <div class="reward-message" id="reward-message"></div>
            <button id="btn-reward-collect" class="btn btn-primary">Collect</button>
            <button id="btn-reward-double" class="btn btn-secondary">Watch Ad (2x)</button>
        </div>

        <!-- Shop Screen -->
        <div id="screen-shop" class="screen">
            <div class="shop-header">
                <div class="shop-title">BLACK MARKET</div>
                <div class="shop-money" id="shop-money">$0</div>
            </div>
            <div class="shop-tabs">
                <button class="shop-tab active" data-tab="tools">Tools</button>
                <button class="shop-tab" data-tab="upgrades">Upgrades</button>
                <button class="shop-tab" data-tab="sell">Sell Loot</button>
            </div>
            <div class="shop-items" id="shop-items">
                <!-- Items rendered by JS -->
            </div>
            <button id="btn-shop-back" class="btn btn-small">Back to Map</button>
        </div>

        <!-- Side Quest Screen -->
        <div id="screen-sidequest" class="screen">
            <div class="sq-portrait" id="sq-portrait"></div>
            <div class="sq-name" id="sq-name"></div>
            <div class="sq-box">
                <div class="sq-text" id="sq-text"></div>
            </div>
            <div class="sq-choices" id="sq-choices">
                <!-- Choice buttons rendered by JS -->
            </div>
        </div>

        <!-- Fail / Game Over Screen -->
        <div id="screen-fail" class="screen">
            <div class="fail-icon" id="fail-icon"></div>
            <div class="fail-title" id="fail-title">DETECTED!</div>
            <div class="fail-subtitle" id="fail-subtitle">Security alerted. You've been spotted.</div>
            <div class="fail-stats" id="fail-stats"></div>
            <button id="btn-fail-retry" class="btn btn-primary">Try Again</button>
            <button id="btn-fail-map" class="btn btn-secondary">Back to Map</button>
        </div>

        <!-- Settings Screen -->
        <div id="screen-settings" class="screen">
            <div class="settings-header">
                <div class="settings-title">SETTINGS</div>
            </div>
            <div class="settings-list">
                <div class="settings-item">
                    <div class="settings-label">Sound Effects</div>
                    <div class="settings-toggle" id="toggle-sfx" data-on="true">
                        <div class="toggle-track"><div class="toggle-thumb"></div></div>
                    </div>
                </div>
                <div class="settings-item">
                    <div class="settings-label">Vibration</div>
                    <div class="settings-toggle" id="toggle-vibrate" data-on="true">
                        <div class="toggle-track"><div class="toggle-thumb"></div></div>
                    </div>
                </div>
                <div class="settings-item">
                    <div class="settings-label">Music</div>
                    <div class="settings-toggle" id="toggle-music" data-on="true">
                        <div class="toggle-track"><div class="toggle-thumb"></div></div>
                    </div>
                </div>
                <div class="settings-divider"></div>
                <div class="settings-item">
                    <div class="settings-label">Show Tutorials</div>
                    <div class="settings-toggle" id="toggle-tutorials" data-on="true">
                        <div class="toggle-track"><div class="toggle-thumb"></div></div>
                    </div>
                </div>
                <div class="settings-divider"></div>
                <button id="btn-reset-progress" class="btn btn-secondary btn-danger-text">Reset All Progress</button>
            </div>
            <button id="btn-settings-back" class="btn btn-small">Back</button>
            <div class="settings-version">v1.0 | Lock Picker: Global Heist</div>
        </div>

        <!-- Stats / Achievements Screen -->
        <div id="screen-stats" class="screen">
            <div class="stats-header">
                <div class="stats-title">DOSSIER</div>
            </div>
            <div class="stats-grid" id="stats-grid"></div>
            <div class="achievements-title">ACHIEVEMENTS</div>
            <div class="achievements-list" id="achievements-list"></div>
            <button id="btn-stats-back" class="btn btn-small">Back</button>
        </div>

        <!-- Tutorial Overlay (shown over heist screen) -->
        <div id="tutorial-overlay" class="tutorial-overlay" style="display:none;">
            <div class="tutorial-content">
                <div class="tutorial-title" id="tutorial-title"></div>
                <div class="tutorial-anim" id="tutorial-anim"></div>
                <div class="tutorial-text" id="tutorial-text"></div>
                <button id="btn-tutorial-ok" class="btn btn-primary btn-small">GOT IT</button>
            </div>
        </div>

        <!-- Transition overlay -->
        <div id="transition-overlay" class="transition-overlay"></div>
    </div>

    <!-- Scripts -->
    <script src="js/utils/save.js"></script>
    <script src="js/utils/audio.js"></script>
    <script src="js/utils/haptics.js"></script>
    <script src="js/utils/particles.js"></script>
    <script src="js/utils/animations.js"></script>
    <script src="js/data/items.js"></script>
    <script src="js/data/dialogue.js"></script>
    <script src="js/data/levels.js"></script>
    <script src="js/puzzles/slider.js"></script>
    <script src="js/puzzles/rotation.js"></script>
    <script src="js/puzzles/memory.js"></script>
    <script src="js/puzzles/pattern.js"></script>
    <script src="js/puzzles/cracker.js"></script>
    <script src="js/screens/briefing.js"></script>
    <script src="js/screens/map.js"></script>
    <script src="js/screens/heist.js"></script>
    <script src="js/screens/reward.js"></script>
    <script src="js/screens/shop.js"></script>
    <script src="js/screens/sidequest.js"></script>
    <script src="js/screens/fail.js"></script>
    <script src="js/screens/settings.js"></script>
    <script src="js/screens/stats.js"></script>
    <script src="js/utils/tutorial.js"></script>
    <script src="js/game.js"></script>
    <script>
        if ("serviceWorker" in navigator) {
            navigator.serviceWorker.register("sw.js").catch(() => {});
        }
    </script>
</body>
</html>
